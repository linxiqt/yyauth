import{r as u,x as f,c as r,a as e,k as g,y as b,m as _,v as k,d as M,t as o,n as x,F as C,l as z,o as a}from"./scWRxJKX.js";const B={class:"bg-white shadow-md rounded-lg p-6 mb-6"},V={class:"flex justify-end"},j=["disabled"],D={key:0,class:"flex items-center"},R={key:1},N={key:0,class:"bg-red-50 border-l-4 border-red-500 p-4 mb-6"},q={class:"flex"},F={class:"ml-3"},H={class:"text-sm text-red-700"},L={key:1,class:"space-y-6"},S={class:"bg-white shadow-lg rounded-xl overflow-hidden"},E={class:"p-6"},I={class:"flex items-center justify-between mb-6"},T={class:"flex items-center"},U={class:"text-xl font-semibold text-gray-800"},A={class:"text-sm text-gray-500"},$={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},G={class:"bg-gray-50 rounded-lg p-4 text-center"},J={class:"text-2xl font-bold text-pink-600"},K={class:"bg-gray-50 rounded-lg p-4 text-center"},O={class:"text-2xl font-bold text-green-600"},P={class:"bg-gray-50 rounded-lg p-4 text-center"},Q={class:"text-2xl font-bold text-blue-600"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},X={class:"space-y-4"},Y={class:"flex items-center"},Z={class:"text-gray-600"},ee={class:"flex items-center"},te={class:"text-gray-600"},se={key:0,class:"mt-8"},le={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},oe={class:"flex items-center"},re={class:"font-medium text-gray-800"},ae={class:"text-sm text-gray-500"},ne={key:2,class:"bg-white shadow-md rounded-lg p-8 text-center"},ce={__name:"reseller",setup(ie){const i=u(!1),n=u(null),l=u(null),m=u(!1),d=f({username:""}),p=async()=>{if(!d.username){n.value="请输入授权商用户名进行查询";return}try{i.value=!0,n.value=null,l.value=null;const s=await fetch(`/api/auth/reseller?username=${encodeURIComponent(d.username)}`),t=await s.json();if(!s.ok)throw new Error(t.message||"查询失败");l.value=t.data.reseller,m.value=!0}catch(s){console.error("查询授权商出错:",s),n.value=s.message||"查询过程中发生错误，请重试"}finally{i.value=!1}},h=s=>({admin:"bg-purple-500",level1:"bg-blue-500",level2:"bg-green-500",level3:"bg-yellow-500",user:"bg-gray-500"})[s]||"bg-gray-500",w=s=>({admin:"bg-purple-100 text-purple-800",level1:"bg-blue-100 text-blue-800",level2:"bg-green-100 text-green-800",level3:"bg-yellow-100 text-yellow-800",user:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",y=s=>({admin:"管理员",user:"普通用户",level1:"一级代理",level2:"二级代理",level3:"三级代理"})[s]||s,v=s=>s?new Date(s).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"未设置";return(s,t)=>(a(),r("div",null,[t[13]||(t[13]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-800"},"授权商查询"),e("p",{class:"text-gray-600 mt-1"},"查询授权商信息和授权记录")],-1)),e("div",B,[e("form",{onSubmit:b(p,["prevent"]),class:"space-y-4"},[e("div",null,[t[1]||(t[1]=e("label",{for:"username",class:"block text-sm font-medium text-gray-700 mb-1"},"授权商用户名",-1)),_(e("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=c=>d.username=c),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-pink-500 focus:border-pink-500",placeholder:"输入授权商用户名",required:""},null,512),[[k,d.username]])]),e("div",V,[e("button",{type:"submit",disabled:i.value||!d.username,class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-pink-600 hover:bg-pink-700 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed"},[i.value?(a(),r("span",D,t[2]||(t[2]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),M(" 查询中... ")]))):(a(),r("span",R,"查询授权商"))],8,j)])],32)]),n.value?(a(),r("div",N,[e("div",q,[t[3]||(t[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm0-2a6 6 0 100-12 6 6 0 000 12zm-1-5v-1h2v1h-2zm0-3V7h2v1h-2z","clip-rule":"evenodd"})])],-1)),e("div",F,[e("p",H,o(n.value),1)])])])):g("",!0),l.value?(a(),r("div",L,[e("div",S,[e("div",{class:x(["h-2",h(l.value.role)])},null,2),e("div",E,[e("div",I,[e("div",T,[t[4]||(t[4]=e("div",{class:"w-16 h-16 rounded-full bg-pink-100 flex items-center justify-center mr-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-pink-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[e("h3",U,o(l.value.username),1),e("p",A,"ID: "+o(l.value.id),1)])]),e("span",{class:x(["px-3 py-1 rounded-full text-sm font-medium",w(l.value.role)])},o(y(l.value.role)),3)]),e("div",$,[e("div",G,[e("div",J,o(l.value.stats.total),1),t[5]||(t[5]=e("div",{class:"text-sm text-gray-600"},"总授权数",-1))]),e("div",K,[e("div",O,o(l.value.stats.active),1),t[6]||(t[6]=e("div",{class:"text-sm text-gray-600"},"有效授权",-1))]),e("div",P,[e("div",Q,o(l.value.apps.length),1),t[7]||(t[7]=e("div",{class:"text-sm text-gray-600"},"应用数量",-1))])]),e("div",W,[e("div",X,[e("div",Y,[t[8]||(t[8]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Z,"余额: ¥"+o(l.value.balance),1)]),e("div",ee,[t[9]||(t[9]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",te,"注册时间: "+o(v(l.value.created_at)),1)])])]),l.value.apps.length>0?(a(),r("div",se,[t[11]||(t[11]=e("h4",{class:"text-lg font-semibold text-gray-800 mb-4"},"应用列表",-1)),e("div",le,[(a(!0),r(C,null,z(l.value.apps,c=>(a(),r("div",{key:c.id,class:"bg-gray-50 rounded-lg p-4"},[e("div",oe,[t[10]||(t[10]=e("div",{class:"w-10 h-10 rounded-full bg-pink-100 flex items-center justify-center mr-3"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-pink-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),e("div",null,[e("h5",re,o(c.name),1),e("p",ae,o(v(c.created_at)),1)])])]))),128))])])):g("",!0)])])])):m.value&&!i.value&&!n.value?(a(),r("div",ne,t[12]||(t[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),e("h3",{class:"text-lg font-medium text-gray-900"},"未找到授权商",-1),e("p",{class:"mt-2 text-sm text-gray-500"}," 没有找到该用户名的授权商。请检查用户名是否正确。 ",-1)]))):g("",!0)]))}};export{ce as default};
