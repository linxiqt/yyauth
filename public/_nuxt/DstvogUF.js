import{x as y,r as _,j as V,c as l,a as e,t as r,n as w,k as h,o as i}from"./scWRxJKX.js";const D={class:"flex justify-center items-center p-4"},Q={class:"bg-white rounded-lg shadow-lg w-full max-w-xl p-6"},C={class:"text-center mb-6"},B={class:"text-sm text-gray-600"},j={key:0,class:"ri-error-warning-line"},L={key:1,class:"ri-checkbox-circle-line"},W={class:"text-lg font-medium mb-1"},X={class:"text-gray-600"},F={class:"mb-6"},H={class:"flex py-3 border-b border-gray-100"},I={key:0,class:"flex py-3 border-b border-gray-100"},N={key:1,class:"flex py-3 border-b border-gray-100"},z={__name:"license",setup(S){const n=y({currentVersion:"1.0.0",domain:""}),o=_(!1),d=_("授权检测失败，请重新检查授权信息"),a=y({expireDate:"",quota:""});async function u(){var c,t,p,x,m,b,g,v;try{const s=await(await fetch("/api/license/check")).json();console.log("data",s),s.status?(o.value=!0,d.value="授权有效，感谢你的支持",a.expireDate=((c=s.data)==null?void 0:c.expire_date)||"",a.quota=((t=s.data)==null?void 0:t.quota)||"",n.currentVersion=((p=s.data)==null?void 0:p.version)||"1.0.0",n.domain=((x=s.data)==null?void 0:x.domain)||window.location.hostname):(o.value=!1,d.value=s.message||"授权无效",a.expireDate=((m=s.data)==null?void 0:m.expire_date)||"",a.quota=((b=s.data)==null?void 0:b.quota)||"",n.currentVersion=((g=s.data)==null?void 0:g.version)||"1.0.0",n.domain=((v=s.data)==null?void 0:v.domain)||window.location.hostname)}catch(f){console.error("授权检查失败:",f),o.value=!1,d.value="授权检测失败，请稍后重试"}}function k(){console.log("激活授权")}function q(){window.location.href="https://qm.qq.com/cgi-bin/qm/qr?_wv=1027&k=pSHFH-gpfwojNdbEQYwvvQg32V-81Wbt&authKey=uvipxXVHWXWAIZ0xwTzLLTC3k4X7fwX%2BxFtP2P5DfW5rwdgp6lh82I0%2B7tSCd%2FQQ&noverify=0&group_code=1023034217"}return V(()=>{u()}),(c,t)=>(i(),l("div",D,[e("div",Q,[e("div",C,[t[0]||(t[0]=e("h1",{class:"text-2xl font-bold text-gray-800 mb-2"},"系统授权检查",-1)),e("p",B,"当前版本："+r(n.currentVersion),1)]),e("div",{class:w([{"bg-red-50 p-4 rounded-md mb-6":!o.value,"bg-green-50 p-4 rounded-md mb-6":o.value},"flex items-center"])},[e("div",{class:w(["mr-4 text-3xl",{"text-red-500":!o.value,"text-green-500":o.value}])},[o.value?(i(),l("i",L)):(i(),l("i",j))],2),e("div",null,[e("h2",W,r(o.value?"√授权有效":"授权无效"),1),e("p",X,r(d.value),1)])],2),e("div",F,[e("div",H,[t[1]||(t[1]=e("span",{class:"w-36 font-medium text-gray-600"},"域名：",-1)),e("span",null,r(n.domain),1)]),a.expireDate?(i(),l("div",I,[t[2]||(t[2]=e("span",{class:"w-36 font-medium text-gray-600"},"授权过期时间：",-1)),e("span",null,r(a.expireDate),1)])):h("",!0),a.quota?(i(),l("div",N,[t[3]||(t[3]=e("span",{class:"w-36 font-medium text-gray-600"},"授权配额：",-1)),e("span",null,r(a.quota),1)])):h("",!0)]),e("div",{class:"flex flex-wrap gap-3 mb-6"},[e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",onClick:u},"重新检查授权"),e("button",{class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",onClick:k},"激活授权"),e("button",{class:"px-4 py-2 border border-blue-600 text-blue-600 rounded hover:bg-blue-50 transition-colors",onClick:q},"购买授权")]),t[4]||(t[4]=e("div",{class:"text-center text-sm text-gray-600"},[e("p",null,"如果您遇到授权问题，请联系我们的客服："),e("p",null,"QQ: 2205147997"),e("p",null,"QQ群: 1023034217")],-1))])]))}};export{z as default};
